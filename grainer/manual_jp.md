\page grainer_manual_jp Grainer - グラニュラーシンセシス・プロセッサー

# Grainer - グラニュラーシンセシス・プロセッサー

VCV Rack向けのリアルタイム・グラニュラーシンセシス・プラグインです。

## 概要

Grainerは、ライブ入力をグレイン単位で分解・再構成するリアルタイム・グラニュラー・プロセッサーです。ピッチ・サイズ・位置・密度を細かく制御しながら、ランダマイズによって有機的なテクスチャを生成します。

最大64ボイス（初期値32）の同時グレイン処理と、5秒バッファに対応し、ライブ演奏からサウンドデザインまで幅広く活用できます。

本モジュールは Max for Live 版 grainer をベースにしています:
https://tsugumasa320.gumroad.com/l/grainer

内蔵リバーブは、Mutable Instruments Cloudsの実装をベースにしています。

## 主な機能

- **マルチグレインエンジン**: 最大64ボイス（初期値32）
- **リアルタイム処理**: 低レイテンシでライブ用途に最適
- **CVモジュレーション**: 主要パラメータをCV制御
- **高音質補間**: 線形補間による滑らかなピッチシフト
- **バッファ制御**: 5秒バッファと Freeze/Reverse

## クイックスタート

1. **オーディオ入力**: AUDIO INPUT L/R にソースを接続
2. **グレイン長**: Grain Length を調整 (50ms - 1000ms、デフォルト525ms)
3. **密度**: Density を調整 (表示 0 - 50Hz)
4. **音色調整**: Pitch / Position / Stereo Spread
5. **ミックス**: Dry/Wet と Reverb を調整

## パラメータ

### 基本コントロール

- **Grain Length**: グレイン長 (50ms - 1000ms、デフォルト525ms)
  - **GUI表示**: 現在値をミリ秒で表示 (例: "525ms")
  - **ダブルクリック**: デフォルト525msにリセット
- **Density**: グレイン生成レート (表示 0 - 50Hz)
  - **GUI表示**: 周波数をHzで表示 (例: "25.0Hz")
  - **範囲**: 内部処理はより高い値に対応、表示は50Hzで制限して分かりやすく
- **Pitch**: ピッチ比 (1/3x - 3x、中央=1x)
  - **GUI表示**: ピッチ倍率を表示 (例: "1.50x", "0.67x")
  - **中央位置**: 1.00x (元ピッチ)
  - **ダブルクリック**: 1.00xにリセット
- **Position**: 再生位置 (0-100%: 0%=最古, 100%=REC位置)
  - **GUI表示**: パーセンテージで表示 (例: "75%")
  - **0%**: バッファ内の最古音声
  - **100%**: 最新の録音位置
- **Stereo Spread**: ステレオ位置のランダマイズ (0-1)
  - **GUI表示**: パーセンテージで表示 (例: "50%")
  - **0%**: モノ/センター位置（全グレインがセンターにパン）
  - **50%**: 中程度のステレオスプレッド（センター周り±25%パン範囲）
  - **100%**: 完全なステレオ幅ランダマイズ（グレインがステレオフィールドのどこにでも配置可能）

### 詳細コントロール

- **Pitch Random**: ピッチのランダム量 (0-3)
  - **GUI表示**: 小数値で表示 (例: "1.25")
  - **0**: ピッチランダマイズなし（全グレインが正確なピッチ設定を使用）
  - **1**: ±1オクターブランダム変化 (2^-1 to 2^+1 = 0.5x to 2.0x)
  - **2**: ±2オクターブランダム変化 (2^-2 to 2^+2 = 0.25x to 4.0x)
  - **3**: ±3オクターブランダム変化 (2^-3 to 2^+3 = 0.125x to 8.0x)
- **Pitch Quantize**: ピッチパラメータをステップ間隔に量子化する度合いを制御 (0-1、デフォルト1.0、ダブルクリックで1.0にリセット)
  - **GUI表示**: パーセンテージで表示 (例: 完全量子化で"100%"、なしで"0%")
  - **LED表示**: 音楽的音程近接度を示すカラー輝度
  - **範囲**: 0 = 量子化なし（連続的ピッチ）、1 = 完全ステップ量子化
  - **アルゴリズム**: ピッチ値を離散的な間隔に丸めるステップベース量子化を適用
  - **機能**: ピッチパラメータ値そのものを変更し、滑らかな連続ピッチ変化ではなくステップ状のピッチ遷移を作成
  - **LED輝度**: 有理数アルゴリズム（分母1-8）で計算され、音楽的音程への近似度を示す
    - 明るいLED = 現在のピッチ値が単純な音楽的比に近い（例：0.5 = 1オクターブ下、0.33 = 5度+オクターブ下）
    - 暗いLED = ピッチ値が音楽的比の間にある
    - 消灯LED = 明確な音楽的比のマッチなし
  - **音楽的動作**:
    - quantize = 0の場合: ピッチが滑らかで連続的に変化
    - quantize = 1の場合: ピッチが離散的なステップでジャンプし、より顕著なピッチ遷移を作成
    - 中間値では滑らかな動作とステップ状動作がブレンド
- **Window Shape**: Hann窓形状の左右偏り (-1〜+1)
  - **GUI表示**: 小数値で表示 (例: "0.25", "-0.50")
  - **-1**: 左偏りの窓形状
  - **0**: 対称Hann窓（中央位置）
  - **+1**: 右偏りの窓形状
- **Position Random**: 位置のランダム量 (0-1)
  - **GUI表示**: パーセンテージで表示 (例: "30%")
- **Input Gain**: 入力ゲイン (0-1、リニア)
  - **GUI表示**: パーセンテージで表示 (例: "75%")
  - **0%**: 入力信号なし
  - **100%**: フル入力ゲイン
- **Dry/Wet**: 原音と処理音の比率 (0-1)
  - **GUI表示**: パーセンテージで表示 (例: "50%")
  - **0%**: 100%ドライ（原音のみ）
  - **100%**: 100%ウェット（処理音のみ）
- **Reverb**: 内蔵リバーブ量 (0-1) - Mutable Instruments Cloudsのリバーブ実装をベース
  - **GUI表示**: パーセンテージで表示 (例: "25%")
  - **0%**: リバーブなし
  - **100%**: 最大リバーブエフェクト
- **Forward/Reverse**: 再生方向の切替 (ボタン)
  - **GUI表示**: ボタンに現在方向の矢印アイコン表示
  - **Forward**: 通常再生方向 (デフォルト)
  - **Reverse**: 逆再生方向
- **Freeze**: バッファのフリーズ (ボタン/CVゲート)
  - **GUI表示**: アクティブ時にボタンが点灯
  - **オフ**: 通常録音モード（バッファが継続的に更新）
  - **オン**: バッファ内容がフリーズ（新しい録音なし、既存内容を保持）

### CV入力

主要パラメータはCV対応（±5Vバイポーラ）:
- Grain Length CV
- Density CV
- Pitch CV（コンテキストメニューで1V/oct切替）
- Pitch Random CV
- Position CV
- Position Random CV
- Stereo Spread CV
- Input Gain CV
- Dry/Wet CV
- Reverb CV
- Window Shape CV

## 応用例

- アンビエントの質感生成
- リズミックなグラニュラーリピート
- 実験的なサウンド加工

## 技術仕様

- **バッファ**: 5秒のリングバッファ（44.1kHz基準）
- **同時グレイン**: 最大64ボイス（初期値32）
- **エンベロープ**: Hann窓（ハン窓）
- **サンプルレート**: VCV Rackの全レートに対応
- **信号レンジ**: ±5V (VCV Rack標準)
- **ピッチ量子化**: ピッチパラメータ値を離散化するステップベースアルゴリズム
  - 離散的なピッチ間隔を作成するため量子化ステップを適用
  - LED輝度は視覚フィードバック用の有理数アルゴリズム（分母1-8）を使用
  - LED計算にはエラー重み付けと音楽的音程検出のための複雑度ペナルティを含む
- **リバーブ**: Mutable Instruments Cloudsの実装をベースとした高品質リバーブエンジン
  - グラニュラーテクスチャに対応した空間的処理を提供
